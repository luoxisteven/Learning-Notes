(function(){"use strict";var e={5755:function(e,t,s){var o=s(5130),r=s(6768);const n={class:"app-container"},a={class:"chat-container"};function l(e,t,s,o,l,c){const i=(0,r.g2)("FileList"),d=(0,r.g2)("ChatBox"),u=(0,r.g2)("ChatInput");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(i,{onUpdateProjects:c.updateProjects},null,8,["onUpdateProjects"]),(0,r.Lk)("div",a,[(0,r.bF)(d,{messages:l.messages},null,8,["messages"]),(0,r.bF)(u,{projects:l.projects,onAddMessage:c.addMessageToChatBox},null,8,["projects","onAddMessage"])])])}s(4114);var c=s(4232);const i={class:"project-list"},d={class:"header company-header"},u={class:"profile-header"},p=["onClick"],f={class:"header"},m={class:"project-header"},h={class:"button-group"},g=["onClick"],y={class:"file-list"},j=["onClick"];function v(e,t,s,o,n,a){const l=(0,r.g2)("el-upload");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",d,[t[3]||(t[3]=(0,r.Lk)("h3",null,"Company Profile",-1)),(0,r.Lk)("button",{class:"add-btn",onClick:t[0]||(t[0]=(...e)=>a.triggerFileInput&&a.triggerFileInput(...e))},"+"),(0,r.Lk)("input",{type:"file",ref:"fileInput",onChange:t[1]||(t[1]=(...e)=>a.addCompanyProfile&&a.addCompanyProfile(...e)),style:{display:"none"}},null,544)]),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.companyProfiles,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"profile-item"},[(0,r.Lk)("div",u,[(0,r.Lk)("span",null,(0,c.v_)(e.name),1),(0,r.Lk)("button",{class:"delete-btn",onClick:t=>a.deleteCompanyProfile(e.name)},"-",8,p)])])))),128))]),(0,r.Lk)("div",f,[t[4]||(t[4]=(0,r.Lk)("h3",null,"Projects",-1)),(0,r.Lk)("button",{class:"add-btn",onClick:t[2]||(t[2]=(...e)=>a.addProject&&a.addProject(...e))},"+")]),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.projects,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"project-item"},[(0,r.Lk)("div",m,[(0,r.Lk)("span",null,(0,c.v_)(e.name),1),(0,r.Lk)("div",h,[(0,r.bF)(l,{class:"upload-demo","show-file-list":!1,"on-change":t=>a.addFile(e.name,t.raw)},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("button",{class:"add-btn"},"+",-1)]))),_:2},1032,["on-change"]),(0,r.Lk)("button",{class:"delete-btn",onClick:t=>a.deleteProject(e.name)},"-",8,g)])]),(0,r.Lk)("ul",y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.files,(t=>((0,r.uX)(),(0,r.CE)("li",{key:t.id,class:"file-item"},[(0,r.Lk)("span",null,(0,c.v_)(t.name),1),(0,r.Lk)("button",{class:"delete-btn",onClick:s=>a.deleteFile(e.name,t.name)},"-",8,j)])))),128))])])))),128))])])}var b=s(2933),k=s(1219),C={data(){return{selectedProjectName:"",companyProfiles:[],projects:[]}},created(){this.fetchData()},methods:{async fetchData(){try{const e=await this.$request.get("/get");this.companyProfiles=e.company_profiles.map(((e,t)=>({id:t+1,name:e}))),this.projects=Object.keys(e.rfps).map(((t,s)=>({id:s+1,name:t,files:e.rfps[t].map(((e,t)=>({id:t+1,name:e})))}))),this.$emit("update-projects",this.projects)}catch(e){console.error("Error fetching data:",e)}},triggerFileInput(){this.$refs.fileInput.click()},async addCompanyProfile(e){const t=e.target.files[0];if(!t)return;console.log(t);const s=new FormData;s.append("file",t);try{const e=await this.$request.post("/add_company_profile/",s,{headers:{"Content-Type":"multipart/form-data"}});"success"===e.status?this.fetchData():console.error("Failed to upload file:",e.message)}catch(o){this.$message.error("Failed to upload file"),console.error("Error uploading file:",o)}finally{e.target.value=""}},async deleteCompanyProfile(e){try{const t=await this.$request.post("/del_company_profile/",{file_name:e});"success"===t.status?(console.log(`File '${e}' deleted successfully.`),this.fetchData()):console.error("Failed to delete file:",t.message)}catch(t){console.error("Error deleting file:",t)}},async addProject(){try{const{value:e}=await b.s.prompt("Input your new project name","New Project",{confirmButtonText:"OK",cancelButtonText:"Cancel"});if(e){const t=await this.$request.post("/add_project/",{project_name:e});"success"===t.status?(console.log(`Created project '${e}' successfully.`),this.fetchData()):console.error("Failed to create project:",t.message)}}catch(e){(0,k.nk)({type:"info",message:"Input canceled or an error occurred."}),console.error("Error creating project:",e)}},async deleteProject(e){try{const t=await this.$request.post("/del_project/",{project_name:e});"success"===t.status?(console.log(`File '${e}' deleted successfully.`),this.fetchData()):console.error("Failed to delete project:",t.message)}catch(t){console.error("Error deleting project:",t)}},async addFile(e,t){const s=new FormData;s.append("project_name",e),s.append("file",t),console.log(t);try{const e=await this.$request.post("/add_project_file/",s,{headers:{"Content-Type":"multipart/form-data"}});"success"===e.status?this.fetchData():console.error("Failed to upload file:",e.message)}catch(o){console.error("File upload error:",o),alert("Error uploading file.")}},async deleteFile(e,t){try{const s=new FormData;s.append("project_name",e),s.append("file_name",t);const o=await this.$request.post("/del_project_file/",s,{headers:{"Content-Type":"multipart/form-data"}});"success"===o.status?(console.log(`File '${this.files}' deleted successfully.`),this.fetchData()):console.error("Failed to delete file:",o.message)}catch(s){console.error("Error deleting file:",s)}}}},L=s(1241);const _=(0,L.A)(C,[["render",v],["__scopeId","data-v-00cad09c"]]);var F=_;const P={class:"chat-box"},w=["innerHTML"];function E(e,t,s,o,n,a){return(0,r.uX)(),(0,r.CE)("div",P,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.messages,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"message"},[(0,r.Lk)("div",{class:(0,c.C4)({"user-message":"user"===e.sender,"bot-message":"bot"===e.sender,"sys-message":"sys"===e.sender}),innerHTML:a.formatMessage(e.text)},null,10,w)])))),128))])}var I={props:{messages:{type:Array,required:!0}},methods:{formatMessage(e){return e.replace(/\n/g,"<br>")}}};const $=(0,L.A)(I,[["render",E],["__scopeId","data-v-64a9c820"]]);var x=$;const M={class:"chat-input"},O={class:"project-selector"},T={class:"select-with-loading"},q=["value"],X={class:"input-container"};function D(e,t,s,n,a,l){const i=(0,r.g2)("Loading"),d=(0,r.g2)("el-icon");return(0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("div",O,[t[4]||(t[4]=(0,r.Lk)("label",{for:"project-select"},"Choose Project:",-1)),(0,r.Lk)("div",T,[(0,r.bo)((0,r.Lk)("select",{id:"project-select","onUpdate:modelValue":t[0]||(t[0]=e=>a.selectedProject=e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.projects,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.name},(0,c.v_)(e.name),9,q)))),128))],512),[[o.u1,a.selectedProject]]),a.isLoading?((0,r.uX)(),(0,r.Wv)(d,{key:0,class:"loading-icon"},{default:(0,r.k6)((()=>[(0,r.bF)(i)])),_:1})):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",X,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.userInput=e),type:"text",placeholder:"Please enter a query...",onKeyup:t[2]||(t[2]=(0,o.jR)(((...e)=>l.sendMessage&&l.sendMessage(...e)),["enter"]))},null,544),[[o.Jo,a.userInput]]),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.sendMessage&&l.sendMessage(...e))},"Send")])])}var A=s(7477),K={components:{Loading:A.Rhj},props:{projects:{type:Array,required:!0}},data(){return{userInput:"",selectedProject:"",isLoading:!1}},methods:{async sendMessage(){if(this.userInput.trim()){this.$emit("add-message",{sender:"user",text:this.userInput});const t=new FormData;t.append("project_name",this.selectedProject),t.append("query",this.userInput),this.userInput="",this.isLoading=!0;try{console.log("before");const e=await this.$request.post("/get_simple_answer/",t,{headers:{"Content-Type":"multipart/form-data"}});console.log(e);const s=e.answer;this.$emit("add-message",{sender:"bot",text:s})}catch(e){console.error("Error fetching answer:",e),this.$emit("add-message",{sender:"bot",text:"Error retrieving answer. Please try again later."})}finally{this.isLoading=!1}}}}};const S=(0,L.A)(K,[["render",D],["__scopeId","data-v-1190293b"]]);var B=S,U={components:{FileList:F,ChatBox:x,ChatInput:B},data(){return{messages:[{sender:"sys",text:"<strong>Guidelines:</strong> \n1) Add or delete any project or file in the left menu;\n2) Choose your project in the below drop-down list;\n3) Enter any query related to this project."}],projects:[]}},methods:{updateProjects(e){this.projects=e},addMessageToChatBox(e){this.messages.push(e)}}};const N=(0,L.A)(U,[["render",l]]);var R=N,H=s(4373);const J=H.A.create({baseURL:"http://127.0.0.1:8000",timeout:18e5});J.interceptors.request.use((e=>(e.data instanceof FormData||(e.headers["Content-Type"]="application/json;charset=utf-8"),e)),(e=>Promise.reject(e))),J.interceptors.response.use((e=>{let t=e.data;return"blob"===e.config.responseType||"string"===typeof t&&(t=t?JSON.parse(t):t),t}),(e=>(console.log("err"+e),Promise.reject(e))));var V=J,G=s(2715);s(4188);const Q=(0,o.Ef)(R);Q.config.globalProperties.$request=V,Q.use(G.A),Q.mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,n){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],n=e[d][2];for(var l=!0,c=0;c<o.length;c++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[c])}))?o.splice(c--,1):(l=!1,n<a&&(a=n));if(l){e.splice(d--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,a=o[0],l=o[1],c=o[2],i=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(c)var d=c(s)}for(t&&t(o);i<a.length;i++)n=a[i],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},o=self["webpackChunkrfp_llm"]=self["webpackChunkrfp_llm"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(5755)}));o=s.O(o)})();
//# sourceMappingURL=app.d66650b4.js.map